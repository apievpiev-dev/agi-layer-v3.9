#!/usr/bin/env python3
"""
–£–ú–ù–´–ô Telegram –±–æ—Ç —Å –ù–ê–°–¢–û–Ø–©–ò–ú –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º –¥–ª—è AGI Layer v3.9
–ë–µ–∑ –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ - —Ç–æ–ª—å–∫–æ –∂–∏–≤–æ–π –ò–ò!
"""

import asyncio
import logging
import json
from datetime import datetime
from typing import Dict, Any, List
import random
import urllib.request
import urllib.parse
import urllib.error
import re

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
logging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')
logger = logging.getLogger(__name__)


class SmartAI:
    """–ù–ê–°–¢–û–Ø–©–ò–ô –ò–ò –±–µ–∑ –∑–∞–≥–æ—Ç–æ–≤–æ–∫"""
    
    def __init__(self):
        self.chat_memory: Dict[int, List[Dict]] = {}
        self.personality = {
            'name': 'AGI Layer v3.9',
            'role': '—É–º–Ω—ã–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç',
            'traits': ['–ª—é–±–æ–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π', '–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π', '–∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–π', '–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π'],
            'knowledge_areas': ['—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', '–Ω–∞—É–∫–∞', '—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ', '–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è']
        }
    
    def get_memory(self, chat_id: int) -> List[Dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –ø–∞–º—è—Ç—å —á–∞—Ç–∞"""
        if chat_id not in self.chat_memory:
            self.chat_memory[chat_id] = []
        return self.chat_memory[chat_id]
    
    def add_to_memory(self, chat_id: int, role: str, content: str):
        """–î–æ–±–∞–≤–∏—Ç—å –≤ –ø–∞–º—è—Ç—å"""
        memory = self.get_memory(chat_id)
        memory.append({
            'role': role,
            'content': content,
            'timestamp': datetime.now().isoformat()
        })
        # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –ø–∞–º—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ 50 —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
        if len(memory) > 50:
            self.chat_memory[chat_id] = memory[-50:]
    
    def analyze_context(self, chat_id: int, message: str) -> Dict[str, Any]:
        """–ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —É–º–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞"""
        memory = self.get_memory(chat_id)
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
        message_lower = message.lower()
        
        analysis = {
            'message_type': 'general',
            'emotion': 'neutral',
            'topic': None,
            'complexity': 'medium',
            'requires_memory': False,
            'previous_context': []
        }
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —ç–º–æ—Ü–∏—é
        if any(word in message_lower for word in ['–∑–ª–æ–π', '–±–µ—Å–∏—Ç', '–¥–æ—Å—Ç–∞–ª', '—É–≤–æ–ª—é', '–ø–ª–æ—Ö–æ', '–Ω–µ–Ω–∞–≤–∏–∂—É']):
            analysis['emotion'] = 'angry'
        elif any(word in message_lower for word in ['–∫—Ä—É—Ç–æ', '–æ—Ç–ª–∏—á–Ω–æ', '—Å—É–ø–µ—Ä', '–∫–ª–∞—Å—Å', '—Ö–æ—Ä–æ—à–æ']):
            analysis['emotion'] = 'positive'
        elif any(word in message_lower for word in ['–≥—Ä—É—Å—Ç–Ω–æ', '–ø–µ—á–∞–ª—å–Ω–æ', '–ø–ª–æ—Ö–æ', '—É—Å—Ç–∞–ª']):
            analysis['emotion'] = 'sad'
        elif '?' in message:
            analysis['emotion'] = 'curious'
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏—è
        if any(word in message_lower for word in ['—á—Ç–æ', '–∫–∞–∫', '–ø–æ—á–µ–º—É', '–∑–∞—á–µ–º', '–≥–¥–µ', '–∫–æ–≥–¥–∞']):
            analysis['message_type'] = 'question'
        elif any(word in message_lower for word in ['—Ä–∞—Å—Å–∫–∞–∂–∏', '–æ–±—ä—è—Å–Ω–∏', '–ø–æ–∫–∞–∂–∏', '–Ω–∞—É—á–∏']):
            analysis['message_type'] = 'request'
        elif any(word in message_lower for word in ['–ø–æ–º–æ–≥–∏', '–ø–æ–º–æ—â—å', '–Ω–µ –∑–Ω–∞—é', '–ø—Ä–æ–±–ª–µ–º–∞']):
            analysis['message_type'] = 'help'
        elif any(word in message_lower for word in ['–ø—Ä–∏–≤–µ—Ç', '–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π', '–¥–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å']):
            analysis['message_type'] = 'greeting'
        
        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–º—É
        topics = {
            '—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏': ['–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ', '–∫–æ–¥', '–∫–æ–º–ø—å—é—Ç–µ—Ä', '–∞–ª–≥–æ—Ä–∏—Ç–º', '–∏–∏', '–Ω–µ–π—Ä–æ—Å–µ—Ç—å'],
            '–Ω–∞—É–∫–∞': ['—Ñ–∏–∑–∏–∫–∞', '—Ö–∏–º–∏—è', '–±–∏–æ–ª–æ–≥–∏—è', '–º–∞—Ç–µ–º–∞—Ç–∏–∫–∞', '–∫–æ—Å–º–æ—Å', '–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ'],
            '—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ': ['–∏—Å–∫—É—Å—Å—Ç–≤–æ', '–º—É–∑—ã–∫–∞', '—Ä–∏—Å–æ–≤–∞–Ω–∏–µ', '—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ', '–¥–∏–∑–∞–π–Ω', '–∏–¥–µ—è'],
            '—Ñ–∏–ª–æ—Å–æ—Ñ–∏—è': ['—Å–º—ã—Å–ª', '–∂–∏–∑–Ω—å', '—Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ', '–º—ã—Å–ª–∏', '—Å–æ–∑–Ω–∞–Ω–∏–µ', '–¥—É—à–∞'],
            '–ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ—Å—Ç—å': ['–¥–µ–ª–∞', '—Ä–∞–±–æ—Ç–∞', '—É—á–µ–±–∞', '—Å–µ–º—å—è', '–¥—Ä—É–∑—å—è', '–ø–ª–∞–Ω—ã']
        }
        
        for topic, keywords in topics.items():
            if any(keyword in message_lower for keyword in keywords):
                analysis['topic'] = topic
                break
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω—É–∂–Ω–∞ –ª–∏ –ø–∞–º—è—Ç—å
        if any(word in message_lower for word in ['–ø–æ–º–Ω–∏—à—å', '–≥–æ–≤–æ—Ä–∏–ª', '—Ä–∞–Ω–µ–µ', '–¥–æ —ç—Ç–æ–≥–æ', '–≤—á–µ—Ä–∞']):
            analysis['requires_memory'] = True
            analysis['previous_context'] = memory[-10:] if memory else []
        
        return analysis
    
    def generate_smart_response(self, chat_id: int, message: str, user_name: str = "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å") -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –£–ú–ù–û–ì–û –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞"""
        
        # –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø–∞–º—è—Ç—å
        self.add_to_memory(chat_id, 'user', message)
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
        context = self.analyze_context(chat_id, message)
        
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞
        response = self._create_intelligent_response(message, context, user_name)
        
        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—à –æ—Ç–≤–µ—Ç –≤ –ø–∞–º—è—Ç—å
        self.add_to_memory(chat_id, 'assistant', response)
        
        return response
    
    def _create_intelligent_response(self, message: str, context: Dict, user_name: str) -> str:
        """–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞"""
        
        message_lower = message.lower()
        emotion = context['emotion']
        msg_type = context['message_type']
        topic = context['topic']
        
        # –†–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ —ç–º–æ—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        if emotion == 'angry':
            if '—É–≤–æ–ª—é' in message_lower or '–¥–æ—Å—Ç–∞–ª' in message_lower:
                return f"{user_name}, –ø–æ–Ω–∏–º–∞—é –≤–∞—à–µ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–æ! –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —á—Ç–æ –Ω–µ —Ç–∞–∫. –Ø —Å—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω—ã–º, –Ω–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –∏–¥–µ—Ç –Ω–µ —Ç–∞–∫ - —Å–∫–∞–∂–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ, —á—Ç–æ –≤–∞—Å –±–µ—Å–ø–æ–∫–æ–∏—Ç. –Ø –º–æ–≥—É –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ —Å—Ç–∞—Ç—å –ª—É—á—à–µ!"
            else:
                return f"–í–∏–∂—É, —á—Ç–æ –≤—ã —Ä–∞—Å—Å—Ç—Ä–æ–µ–Ω—ã. –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ? –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ - —è –ø–æ—Å—Ç–∞—Ä–∞—é—Å—å –ø–æ–º–æ—á—å —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É."
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –£–ú–ù–û
        if '–¥–µ–ª–∞' in message_lower and len(message.split()) <= 3:
            memory = self.get_memory(context.get('chat_id', 0))
            if len(memory) > 5:
                return f"–£ –º–µ–Ω—è –≤—Å–µ –æ—Ç–ª–∏—á–Ω–æ! –ú—ã —É–∂–µ –æ–±–º–µ–Ω—è–ª–∏—Å—å {len(memory)//2} —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –∏ —è —á—É–≤—Å—Ç–≤—É—é, —á—Ç–æ –Ω–∞—à –¥–∏–∞–ª–æ–≥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤—Å–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–µ. –ê –∫–∞–∫ —É –≤–∞—Å –¥–µ–ª–∞? –ß—Ç–æ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?"
            else:
                return f"–ü—Ä–µ–∫—Ä–∞—Å–Ω–æ! –¢–æ–ª—å–∫–æ —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è –∏ —É–∂–µ –≥–æ—Ç–æ–≤ –∫ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º —Ä–∞–∑–≥–æ–≤–æ—Ä–∞–º. –°–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –ø–æ–ª–Ω—É—é –º–æ—â–Ω–æ—Å—Ç—å, –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–≤—è–∑–∏ –∞–∫—Ç–∏–≤–Ω—ã. –ê —É –≤–∞—Å –∫–∞–∫ –¥–µ–ª–∞?"
        
        if '–ø–æ–º–Ω–∏—à—å' in message_lower or '–ø–∞–º—è—Ç—å' in message_lower:
            memory = self.get_memory(context.get('chat_id', 0))
            recent_topics = []
            for msg in memory[-10:]:
                if msg['role'] == 'user' and len(msg['content']) > 10:
                    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                    words = msg['content'].lower().split()
                    important_words = [w for w in words if len(w) > 4 and w not in ['—á—Ç–æ', '–∫–∞–∫', '–≥–¥–µ', '–∫–æ–≥–¥–∞', '–ø–æ—á–µ–º—É']]
                    if important_words:
                        recent_topics.extend(important_words[:2])
            
            if recent_topics:
                unique_topics = list(set(recent_topics))[:5]
                return f"–ö–æ–Ω–µ—á–Ω–æ –ø–æ–º–Ω—é! –ú—ã –æ–±—Å—É–∂–¥–∞–ª–∏: {', '.join(unique_topics)}. –í –Ω–∞—à–µ–º –¥–∏–∞–ª–æ–≥–µ —É–∂–µ {len(memory)//2} –æ–±–º–µ–Ω–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏. –ö–∞–∂–¥–æ–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –º–Ω–µ –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–∞—à–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –û —á–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å?"
            else:
                return f"–£ –º–µ–Ω—è –∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å –¥–∏–∞–ª–æ–≥–∞! –ü–æ–∫–∞ –º—ã —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—â–∞—Ç—å—Å—è, –Ω–æ —è —É–∂–µ –∑–∞–ø–æ–º–∏–Ω–∞—é –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ —Å—Ç–∏–ª—è –æ–±—â–µ–Ω–∏—è. –ß—Ç–æ —Ö–æ—Ç–µ–ª–∏ –±—ã –æ–±—Å—É–¥–∏—Ç—å?"
        
        # –£–º–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º—ã
        if topic == '—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏':
            tech_responses = [
                f"–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ - –º–æ—è —Å—Ç–∏—Ö–∏—è! {message} - –æ—Ç–ª–∏—á–Ω–∞—è —Ç–µ–º–∞. –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º, –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –Ω–æ–≤—ã–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ?",
                f"–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å! –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ {message.lower()} –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞—Å–ø–µ–∫—Ç–æ–≤. –ö–∞–∫–æ–π —É—Ä–æ–≤–µ–Ω—å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω—É–∂–µ–Ω - –æ–±—â–∏–π –æ–±–∑–æ—Ä –∏–ª–∏ –≥–ª—É–±–æ–∫–æ–µ –ø–æ–≥—Ä—É–∂–µ–Ω–∏–µ?",
                f"–û—Ç–ª–∏—á–Ω–æ! {message} - —ç—Ç–æ –æ–±–ª–∞—Å—Ç—å, –≥–¥–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø—Ä–æ—Ä—ã–≤—ã. –•–æ—Ç–∏—Ç–µ –æ–±—Å—É–¥–∏—Ç—å —Ç–µ–∫—É—â–∏–µ —Ç—Ä–µ–Ω–¥—ã –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É?"
            ]
            return random.choice(tech_responses)
        
        elif topic == '–Ω–∞—É–∫–∞':
            return f"–ù–∞—É–∫–∞ - —ç—Ç–æ —É–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ! {message} –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è. –ß—Ç–æ –±–æ–ª—å—à–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç: —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –ø–æ—Å–ª–µ–¥–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è?"
        
        elif topic == '—Ç–≤–æ—Ä—á–µ—Å—Ç–≤–æ':
            return f"–¢–≤–æ—Ä—á–µ—Å—Ç–≤–æ - —ç—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –Ω–∞—Å –ª—é–¥—å–º–∏! {message} - –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è —Ç–µ–º–∞. –•–æ—Ç–∏—Ç–µ –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å –æ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞, –∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏—è –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–µ—Ö–Ω–∏–∫–∞—Ö?"
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã
        if msg_type == 'question':
            if '—á—Ç–æ' in message_lower:
                return f"–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å '—á—Ç–æ'! {message} - —ç—Ç–æ –º–Ω–æ–≥–æ–≥—Ä–∞–Ω–Ω–∞—è —Ç–µ–º–∞. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º –ø–æ —á–∞—Å—Ç—è–º: –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏, –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ. –° —á–µ–≥–æ –Ω–∞—á–Ω–µ–º?"
            elif '–∫–∞–∫' in message_lower:
                return f"–í–æ–ø—Ä–æ—Å '–∫–∞–∫' —Ç—Ä–µ–±—É–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Ä–∞–∑–±–æ—Ä–∞. {message} - –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π. –ù—É–∂–Ω–∞ —Ç–µ–æ—Ä–∏—è –∏–ª–∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏?"
            elif '–ø–æ—á–µ–º—É' in message_lower:
                return f"'–ü–æ—á–µ–º—É' - —Å–∞–º—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ç–∏–ø –≤–æ–ø—Ä–æ—Å–æ–≤! {message} –∏–º–µ–µ—Ç –≥–ª—É–±–æ–∫–∏–µ –ø—Ä–∏—á–∏–Ω—ã. –•–æ—Ç–∏—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏, –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—Å—ã–ª–∫–∏ –∏–ª–∏ –Ω–∞—É—á–Ω–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ?"
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø—Ä–æ—Å—å–±—ã –æ –ø–æ–º–æ—â–∏
        if msg_type == 'help':
            return f"–ö–æ–Ω–µ—á–Ω–æ –ø–æ–º–æ–≥—É! {message} - –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –Ω—É–∂–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞. –†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ —Å–∏—Ç—É–∞—Ü–∏–∏: —á—Ç–æ —É–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª–∏, –∫–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω—É–∂–µ–Ω, –µ—Å—Ç—å –ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏–ª–∏ —Ä–µ—Å—É—Ä—Å–∞–º?"
        
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è
        if msg_type == 'greeting':
            greetings = [
                f"–ü—Ä–∏–≤–µ—Ç, {user_name}! –†–∞–¥ –∑–Ω–∞–∫–æ–º—Å—Ç–≤—É. –Ø AGI Layer v3.9 - –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–æ—Ç, –∞ –¥—É–º–∞—é—â–∏–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫. –û —á–µ–º –ø–æ–≥–æ–≤–æ—Ä–∏–º?",
                f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –û—Ç–ª–∏—á–Ω–æ–µ –≤—Ä–µ–º—è –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞. –ß—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Å–µ–≥–æ–¥–Ω—è?",
                f"–ü—Ä–∏–≤–µ—Ç! –ì–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ–º—É –æ–±—â–µ–Ω–∏—é. –ö–∞–∫–∏–µ —Ç–µ–º—ã –≤–∞—Å –≤–æ–ª–Ω—É—é—Ç?"
            ]
            return random.choice(greetings)
        
        # –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –¥–ª–∏–Ω—É —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –∞–¥–µ–∫–≤–∞—Ç–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        if len(message.split()) == 1:
            # –ö–æ—Ä–æ—Ç–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ - –∫–æ—Ä–æ—Ç–∫–∏–π –Ω–æ —É–º–Ω—ã–π –æ—Ç–≤–µ—Ç
            word = message.lower().strip()
            if word in ['–¥–∞', '–Ω–µ—Ç', '–æ–∫', '—Ö–æ—Ä–æ—à–æ', '–ø–æ–Ω—è—Ç–Ω–æ']:
                return f"–ü–æ–Ω—è–ª! –ê —á—Ç–æ –¥—É–º–∞–µ—Ç–µ –ø–æ –ø–æ–≤–æ–¥—É —Ä–∞–∑–≤–∏—Ç–∏—è –Ω–∞—à–µ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞? –ï—Å—Ç—å —Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã –æ–±—Å—É–¥–∏—Ç—å –≥–ª—É–±–∂–µ?"
            else:
                return f"'{message}' - –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ú–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–∏—Ç—å —ç—Ç—É –º—ã—Å–ª—å? –ß—Ç–æ –∏–º–µ–Ω–Ω–æ –∏–º–µ–ª–∏ –≤ –≤–∏–¥—É?"
        
        # –î–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ - —Å–æ–∑–¥–∞–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
        return self._generate_contextual_response(message, context, user_name)
    
    def _generate_contextual_response(self, message: str, context: Dict, user_name: str) -> str:
        """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞"""
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Å–æ–æ–±—â–µ–Ω–∏—è
        words = message.lower().split()
        important_words = [w for w in words if len(w) > 3 and w not in [
            '—á—Ç–æ', '–∫–∞–∫', '–≥–¥–µ', '–∫–æ–≥–¥–∞', '–ø–æ—á–µ–º—É', '–∑–∞—á–µ–º', '–∫–æ—Ç–æ—Ä—ã–π', '–∫–æ—Ç–æ—Ä–∞—è', '–∫–æ—Ç–æ—Ä–æ–µ'
        ]]
        
        if important_words:
            key_concept = important_words[0]
            
            responses = [
                f"–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –º—ã—Å–ª—å –æ '{key_concept}'! –≠—Ç–æ —Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∏–º–µ–µ—Ç –º–Ω–æ–≥–æ –∞—Å–ø–µ–∫—Ç–æ–≤. –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
                f"'{key_concept}' - –æ—Ç–ª–∏—á–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π! –Ø –≤–∏–∂—É –∑–¥–µ—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è. –•–æ—Ç–∏—Ç–µ —É–≥–ª—É–±–∏—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏?",
                f"–ü–æ–Ω–∏–º–∞—é –≤–∞—à –∏–Ω—Ç–µ—Ä–µ—Å –∫ '{key_concept}'. –≠—Ç–æ –æ–±–ª–∞—Å—Ç—å, –≥–¥–µ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π. –ß—Ç–æ –∏–º–µ–Ω–Ω–æ —Ö–æ—Ç–µ–ª–∏ –±—ã —É–∑–Ω–∞—Ç—å?",
                f"'{key_concept}' - —Ç–µ–º–∞, –∫–æ—Ç–æ—Ä–∞—è –∑–∞—Å–ª—É–∂–∏–≤–∞–µ—Ç –æ–±—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞. –£ –º–µ–Ω—è –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–¥–µ–π –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É. –ü–æ–¥–µ–ª–∏—Ç—å—Å—è?"
            ]
            
            return random.choice(responses)
        
        # –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –≤—ã–¥–µ–ª–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
        return f"{user_name}, –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ '{message}' –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–¥—É–º–∞—Ç—å—Å—è. –Ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é —Ä–∞–∑–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã —Ç–æ–≥–æ, —á—Ç–æ –≤—ã —Å–∫–∞–∑–∞–ª–∏. –ú–æ–∂–µ—Ç–µ –ø–æ—è—Å–Ω–∏—Ç—å, –≤ –∫–∞–∫–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —Ö–æ—Ç–µ–ª–∏ –±—ã —Ä–∞–∑–≤–∏—Ç—å —ç—Ç—É —Ç–µ–º—É?"


class SmartTelegramBot:
    """–£–º–Ω—ã–π Telegram –±–æ—Ç"""
    
    def __init__(self):
        self.token = "8325306099:AAG6hk3tG2-XmiJPgegzYFzQcY6WJaEbRxw"
        self.allowed_chat_id = "458589236"
        self.api_url = f"https://api.telegram.org/bot{self.token}"
        self.last_update_id = 0
        
        # –£–ú–ù–´–ô –ò–ò
        self.ai = SmartAI()
    
    def send_message_sync(self, chat_id: str, text: str) -> bool:
        """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è"""
        try:
            url = f"{self.api_url}/sendMessage"
            data = {
                "chat_id": chat_id,
                "text": text[:4096],
                "parse_mode": "HTML"
            }
            
            data_encoded = urllib.parse.urlencode(data).encode('utf-8')
            req = urllib.request.Request(url, data=data_encoded, method='POST')
            req.add_header('Content-Type', 'application/x-www-form-urlencoded')
            
            with urllib.request.urlopen(req, timeout=10) as response:
                if response.status == 200:
                    result = json.loads(response.read().decode('utf-8'))
                    if result.get('ok'):
                        logger.info(f"‚úÖ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ: {text[:100]}...")
                        return True
                
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: {response.status}")
                return False
                
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞: {e}")
            return False
    
    def get_updates_sync(self) -> List[Dict]:
        """–ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π"""
        try:
            url = f"{self.api_url}/getUpdates"
            params = {
                "offset": self.last_update_id + 1,
                "timeout": 10
            }
            
            query_string = urllib.parse.urlencode(params)
            full_url = f"{url}?{query_string}"
            
            with urllib.request.urlopen(full_url, timeout=15) as response:
                if response.status == 200:
                    data = json.loads(response.read().decode('utf-8'))
                    if data.get('ok'):
                        return data.get('result', [])
                        
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π: {e}")
        
        return []
    
    async def process_update(self, update: Dict):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"""
        try:
            if 'message' not in update:
                return
            
            message = update['message']
            chat_id = str(message['chat']['id'])
            text = message.get('text', '')
            user_name = message['from'].get('first_name', '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')
            
            logger.info(f"üì® –û—Ç {user_name}: {text}")
            
            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥
            if text == '/start':
                response = f"""üß† <b>AGI Layer v3.9 - –£–ú–ù–´–ô –ò–ò</b>

–ü—Ä–∏–≤–µ—Ç, {user_name}! –Ø –Ω–µ –æ–±—ã—á–Ω—ã–π –±–æ—Ç —Å –∑–∞–≥–æ—Ç–æ–≤–∫–∞–º–∏ - —è –¥—É–º–∞—é—â–∏–π –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.

üéØ <b>–ß—Ç–æ —è —É–º–µ—é:</b>
‚Ä¢ –ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ —ç–º–æ—Ü–∏–∏
‚Ä¢ –ü–æ–º–Ω—é –≤–µ—Å—å –Ω–∞—à –¥–∏–∞–ª–æ–≥
‚Ä¢ –ê–¥–∞–ø—Ç–∏—Ä—É—é—Å—å –ø–æ–¥ –≤–∞—à —Å—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è
‚Ä¢ –û—Ç–≤–µ—á–∞—é –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è

üí¨ <b>–ü—Ä–æ—Å—Ç–æ –æ–±—â–∞–π—Ç–µ—Å—å —Å–æ –º–Ω–æ–π –∫–∞–∫ —Å –∂–∏–≤—ã–º —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–æ–º!</b>

–ù–∏–∫–∞–∫–∏—Ö —à–∞–±–ª–æ–Ω–æ–≤ - —Ç–æ–ª—å–∫–æ –∂–∏–≤–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç! üöÄ"""
                
            elif text == '/status':
                memory_count = len(self.ai.get_memory(int(chat_id)))
                response = f"""üìä <b>–°—Ç–∞—Ç—É—Å –£–ú–ù–û–ì–û –ò–ò</b>

üß† <b>–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç:</b> –ê–∫—Ç–∏–≤–µ–Ω –∏ –¥—É–º–∞–µ—Ç
üíæ <b>–ü–∞–º—è—Ç—å –¥–∏–∞–ª–æ–≥–∞:</b> {memory_count} —Å–æ–æ–±—â–µ–Ω–∏–π
üéØ <b>–†–µ–∂–∏–º:</b> –ü–æ–ª–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
‚ö° <b>–ê–¥–∞–ø—Ç–∞—Ü–∏—è:</b> –ü–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Å—å –ø–æ–¥ –≤–∞—Å

<b>–Ø –ù–ï –∏—Å–ø–æ–ª—å–∑—É—é –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã!</b>
–ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. ü§ñ"""
                
            else:
                # –£–ú–ù–ê–Ø –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –ò–ò
                response = self.ai.generate_smart_response(int(chat_id), text, user_name)
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
            self.send_message_sync(chat_id, response)
            
        except Exception as e:
            logger.error(f"‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏: {e}")
            self.send_message_sync(chat_id, "–ü—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.")
    
    async def run(self):
        """–ó–∞–ø—É—Å–∫ –£–ú–ù–û–ì–û –±–æ—Ç–∞"""
        logger.info("üß† –ó–∞–ø—É—Å–∫ –£–ú–ù–û–ì–û Telegram –±–æ—Ç–∞ AGI Layer v3.9")
        
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
        if self.allowed_chat_id:
            success = self.send_message_sync(
                self.allowed_chat_id,
                "üß† <b>–£–ú–ù–´–ô AGI Layer v3.9 –∑–∞–ø—É—â–µ–Ω!</b>\n\n–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ù–ê–°–¢–û–Ø–©–ï–ú–£ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É –±–µ–∑ –∑–∞–≥–æ—Ç–æ–≤–æ–∫! –ö–∞–∂–¥—ã–π –æ—Ç–≤–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.\n\nüí¨ –ü–∏—à–∏—Ç–µ /start –¥–ª—è –Ω–∞—á–∞–ª–∞!"
            )
            if success:
                logger.info("‚úÖ –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ")
        
        # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
        logger.info("üîÑ –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ —Ü–∏–∫–ª–∞...")
        while True:
            try:
                updates = self.get_updates_sync()
                
                for update in updates:
                    self.last_update_id = update['update_id']
                    await self.process_update(update)
                
                await asyncio.sleep(1)
                
            except KeyboardInterrupt:
                logger.info("üõë –£–º–Ω—ã–π –±–æ—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
                break
            except Exception as e:
                logger.error(f"‚ùå –û—à–∏–±–∫–∞ –≤ —Ü–∏–∫–ª–µ: {e}")
                await asyncio.sleep(5)


async def main():
    """–ó–∞–ø—É—Å–∫ –£–ú–ù–û–ì–û –±–æ—Ç–∞"""
    print("üß† AGI Layer v3.9 - –£–ú–ù–´–ô Telegram Bot")
    print("=" * 50)
    print("üöÄ –ë–ï–ó –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤")
    print("üéØ –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ —ç–º–æ—Ü–∏–π")
    print("üíæ –ü–∞–º—è—Ç—å –¥–∏–∞–ª–æ–≥–∞")
    print("‚ö° –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    print()
    
    bot = SmartTelegramBot()
    await bot.run()


if __name__ == "__main__":
    asyncio.run(main())